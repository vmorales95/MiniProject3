---
title: "Real_Mini_Project_3"
author: "Paige E. Patrick"
date: "11/17/2017"
output: html_document
---

```{r}
library(mdsr)
library(RMySQL)
db <- dbConnect_scidb(dbname = "imdb")
```

```{r}
library(ggplot2)
library(tidyverse)
library(dbplyr)
```

```{r}
this_big_thing <- db %>%
dbGetQuery("SELECT mi.info, 
t.title, t.production_year, t.id
FROM title t
JOIN movie_info mi ON t.id = mi.movie_id
WHERE mi.info_type_id = 3
AND t.kind_id = 1;")
```

```{r}
title_genre <- this_big_thing %>%
  group_by(production_year, id) %>%
  summarise(genres_observed = n()) %>%
  filter(production_year < 2018)
```

```{r}
avg_max_genre_count <- title_genre %>%
  group_by(production_year) %>%
  summarise(max_genre_count = max(genres_observed), average_genre_count = mean(genres_observed))
```

```{r}
ggplot(avg_max_genre_count, aes()) + 
  geom_line(aes(x = production_year, y = average_genre_count)) + 
  geom_line(aes(x = production_year, y = max_genre_count))
```

```{r}
genre_breakdown <- this_big_thing %>%
  group_by(production_year, info) %>%
  summarise(genres_observed = n()) %>%
  filter(production_year < 2018)
```

```{r}
ggplot(genre_breakdown, aes(x = production_year, y = genres_observed)) +
geom_line() +
  facet_wrap("info")
```


